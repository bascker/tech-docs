# chattr & lsattr
## 简介
1.两个命令是用来查看和改变文件、目录属性的

2.通过chattr命令修改属性能够提高系统的安全性，但是它并不适合所有的目录\(不能保护_**/、/dev、/tmp、/var**_目录\)

3.有时候你发现用root权限都不能修改某个文件，大部分原因是曾经用chattr命令锁定该文件了

4.语法：_**chattr \[ -RVf \] \[ -v version \] \[ mode \] files…**_

5.最关键的是在_**\[mode\]**_部分,由_**+-=**_和_**\[ASacDdIijsTtu\]**_这些字符组合控制文件属性\(**常用到的是**_**a**_**和**_**i**_\)

* + ：在原有参数设定基础上，追加参数
* - ：在原有参数设定基础上，移除参数
* = ：更新为指定参数设定
* A：文件或目录的 atime \(access time\)不可被修改\(modified\), 可以有效预防例如手提电脑磁盘I/O错误的发生
* S：硬盘I/O同步选项，功能类似sync。
* _**a**_：即append，设定该参数后，只能向文件中添加数据，而不能删除，多用于服务器日志文件安全，只有root才能设定这个属性
* c：即compresse，设定文件是否经压缩后再存储。读取时需要经过自动解压操作
* d：即no dump，设定文件不能成为dump程序的备份目标
* _**i**_：设定文件不能被删除、改名、设定链接关系，同时不能写入或新增内容。i参数对于文件 系统的安全设置有很大帮助
* s：保密性地删除文件或目录，即硬盘空间被全部收回

## 案例
防止 /etc/resolve.conf 这个关键文件被修改

```
$ chattr +i /etc/resolve.conf
# 加锁
$ lsattr /etc/resolv.conf
----i----------- /etc/resolv.conf

# 解锁
$ chattr -i /etc/resolve.conf
```